<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<project default="Generate EXE" name="Builder for EGAIS Emulator">

    <property name="version" value="1.0"/>
    <property name="path" value="./"/>
	<property name="EGAISEmulatorService" value="EGAISEmulator.exe4j" />
    
    <target name="create_jar">   
        <mkdir dir="${path}"/>  
        <jar destfile="${path}\EGAISEmulator.jar" update="true" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Built-By" value="${user.name}"/>               
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="bin">
                <exclude name="**/*.cfg.xml"/>
                <exclude name="**/*config.xml"/>
            </fileset>
        </jar>
        <!--copy file="src/${config}" tofile="${path}\${config}"/-->
    </target>           
    
	<target name="Generate EXE" depends="exe4j_exists" if="exe4j.exists">
		<exec executable="D:/Program Files (x86)/exe4j/bin/exe4jc.exe" command="-v ${EGAISEmulatorService}"/>
	</target>

	<target name="exe4j_exists" depends="create_jar">
		<available file="D:/Program Files (x86)/exe4j/bin" type="dir" property="exe4j.exists" />
	</target>
	
</project>
